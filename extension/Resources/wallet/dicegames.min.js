function _DICEGame(){function b(e){MyWallet.setLoadingText("Calculating Profit / Loss");var d=e.find('input[name="send-to-address"]');var c=[];$(d).each(function(){c.push($(this).val())});if(c.length==0){return}$.get(root+"walletprofitloss?input_address="+getActiveAddresses().join("|")+"&output_address="+c.join("|")+"&format=plain").success(function(h){var f=e.find(".profit-loss").show(200);f.find(".n-bets").text(h.n_sent);var g=h.result;if(g>0){f.find(".winnings").html('<font color="green">'+formatMoney(g,true)+"</font>")}else{if(g<0){f.find(".winnings").html('<font color="red">'+formatMoney(g,true)+"</font>")}else{f.find(".winnings").html(formatMoney(g,true))}}f.find(".refresh").unbind().click(function(){b(e)})})}function a(f,e,c){var d=$('<div class="modal hide">        <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h3>Confirm Multiple Bets</h3>        </div>        <div class="modal-body">            <p>This bet will be repeated <b class="times"></b> times. Please confirm this is correct.</p>        </div>        <div class="modal-footer">            <a href="#" class="btn btn-secondary">Cancel</a>            <a href="#" class="btn btn-primary">Continue</a>        </div>    </div>');$("body").append(d);d.modal({keyboard:true,backdrop:"static",show:true});d.find(".times").text(f);d.center();d.find(".btn.btn-primary").unbind().click(function(){d.modal("hide");d.remove();if(e){e()}});d.find(".btn.btn-secondary").unbind().click(function(){d.modal("hide");d.remove();if(c){c()}})}this.init=function(d){var c=d.find(".recipient-container");if(!c.is(":empty")){return}$.get(root+"dicegames?game="+d.data("name")).success(function(j){c.empty();var e=$('<div class="control-group"><label class="control-label">Win Odds</label><div class="controls"><p>Enter the amounts you wish to bet below:</p></div></div>');c.append(e);for(var g in j){var f=j[g];if(f.popular){c.append('<div class="control-group recipient"><label class="control-label">'+f.odds+'%</label><div class="controls"><input name="send-to-address" type="hidden" value="'+f.address+'" /><div class="input-append"> <input class="send-value" style="width:auto;max-width:145px;" data-optional="true" name="send-value" data-multiplier="'+f.multiplier+'" data-minbet="'+f.minBet+'" data-maxbet="'+f.maxBet+'" placeholder="Bet Amount (BTC)" type="text" /><span class="add-on send-win-amount">No Bet</span> </div></div></div>')}}function h(i){if(i.val()>0){i.parent().find(".send-win-amount").html("Win Amount: "+(parseFloat(i.val())*parseFloat(i.data("multiplier"))).toFixed(4)+" BTC")}else{i.parent().find(".send-win-amount").html("No Bet")}}c.find('input[name="send-value"]').change(function(){if($(this).val()>$(this).data("maxbet")){$(this).val($(this).data("maxbet"));MyWallet.makeNotice("error","misc-error","The Maximum Bet is "+$(this).data("maxbet")+" BTC")}if($(this).val()==0){$(this).val("")}else{if($(this).val()<$(this).data("minbet")){$(this).val($(this).data("minbet"));MyWallet.makeNotice("error","misc-error","The Minimum Bet is "+$(this).data("minbet")+" BTC")}}h($(this))});c.find('input[name="send-value"]').keyup(function(){h($(this))});d.find(".send").unbind().click(function(){var i=0;var l=$(this).data("repeat");if(!l){l=0}else{l=parseInt(l)}var k={on_success:function(){++i;if(i<l){setTimeout(m,100)}}};var m=function(){console.log("Send Called");var n=initNewTx();n.addListener(k);startTxUI(d,"dice",n)};if(l>1){a(l,function(){loadScript("wallet/signer.min.js",function(){m()})})}else{loadScript("wallet/signer.min.js",function(){m()})}})}).error(function(f){MyWallet.makeNotice("error","misc-error",f)})}}var DICEGame=new _DICEGame();